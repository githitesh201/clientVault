---
title: الأوامر الخلفية
---

## الأوامر المفيدة

يجب تنفيذ هذه الأوامر من مجلد packages/clientvault-server.
من أي مجلد آخر يمكنك تشغيل `npx nx {command} clientvault-server` (أو `npx nx run clientvault-server:{command}`).

### إعداد المرة الأولى

```
npx nx database:reset clientvault-server # إعداد قاعدة البيانات مع بذور التطوير
```

### بدء الخادم

```
npx nx run clientvault-server:start
```

### Lint

```
npx nx run clientvault-server:lint # مرر --fix لإصلاح أخطاء التدقيق
```

### تجربة

```
npx nx run clientvault-server:test:unit # تشغيل اختبارات الوحدة
npx nx run clientvault-server:test:integration # تشغيل اختبارات التكامل
```

ملاحظة: يمكنك تشغيل `npx nx run clientvault-server:test:integration:with-db-reset` في حالة احتياجك لإعادة تعيين قاعدة البيانات قبل تشغيل اختبارات التكامل.

### إعادة تعيين قاعدة البيانات

إذا أردت إعادة تعيين قاعدة البيانات وزرع بعض البيانات فيها، يمكنك تشغيل الأمر التالي:

```bash
npx nx run clientvault-server:database:reset
```

### عمليات الترحيل

#### للكائنات داخل مخططات Core/Metadata (TypeORM)

```bash
npx nx run clientvault-server:typeorm migration:generate src/database/typeorm/core/migrations/nameOfYourMigration -d src/database/typeorm/core/core.datasource.ts
```

#### لكائنات مساحة العمل

لا توجد ملفات هجيرات، يتم إنشاء الهجيرات تلقائيًا لكل مساحة عمل،
مخزنة في قاعدة البيانات، ويتم تطبيقها مع هذا الأمر

```bash
npx nx run clientvault-server:command workspace:sync-metadata -f
```

<Warning>
  سيؤدي هذا إلى إسقاط قاعدة البيانات وإعادة تشغيل الهجرات والبذور.

  تأكد من عمل نسخة احتياطية لأي بيانات تريد الاحتفاظ بها قبل تشغيل هذا الأمر.
</Warning>

## "التقنية المستخدمة"

تستخدم ClientVault بشكل أساسي NestJS للواجهة الخلفية.

Prisma كان أول ORM استخدمناه. ولكن للسماح للمستخدمين بإنشاء الحقول والعناصر المخصصة، كان من المنطقي استخدام مستوى أقل حيث نحتاج إلى تحكم دقيق. الآن يستخدم المشروع TypeORM.

إليك شكل العناصر التقنية الآن.

**النواة**

* [NestJS](https://nestjs.com/)
* [TypeORM](https://typeorm.io/)
* [GraphQL Yoga](https://the-guild.dev/graphql/yoga-server)

**قاعدة البيانات**

* [Postgres](https://www.postgresql.org/)

**التكاملات مع جهات خارجية**

* [Sentry](https://sentry.io/welcome/) لتتبع الأخطاء

**الاختبار**

* [Jest](https://jestjs.io/)

**الأدوات**

* [Yarn](https://yarnpkg.com/)
* [ESLint](https://eslint.org/)

**التطوير**

* [AWS EKS](https://aws.amazon.com/eks/)
